<!doctype html><title>Debugging Vim Errors</title><link rel="shortcut icon" href=https://sak96.github.io/theme/images/favicon.svg><meta content=width=device-width,initial-scale=1.0 name=viewport><meta charset=UTF-8><link href=https://sak96.github.io/feeds/all.atom.xml rel=alternate title=sak96-blog type=application/atom+xml><link href=https://sak96.github.io/theme/syntax/pygment.css rel=stylesheet><style>*{box-sizing:border-box}:root{--bg:#1d2021;--fg:#d4be98;--gray:#928374;--blue:#7daea3;--green:#a9b665;--red:#ea6962}[data-theme=light]{--bg:#f9f5d7;--fg:#654735;--gray:#928374;--blue:#45707a;--green:#6c782e;--red:#c14a4a}table,th,td{border:1px solid var(--fg);border-collapse:collapse;padding:10px}.codehilitetable{border:2px solid var(--blue);border-collapse:collapse;border-radius:4px;padding:0;font-family:monospace;display:block;overflow-x:auto}.codehilite{margin:0 1em}.linenos{text-align:right;border:0;border-right:2px solid var(--blue);-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-khtml-user-select:none;padding:0 .5em}.code{border:0}body{background-color:var(--bg);color:var(--fg)}a{color:var(--blue);text-decoration:none}h1,h2,h3,h4,h5,h6{color:var(--green)}small{color:var(--gray)}.navbar{border-bottom:1px solid var(--green)}.navbar div{display:inline-block}.nav-end{position:absolute;right:.5rem}.navbar a{padding:.5rem 0}.navbar a:before{content:"["}.navbar a:after{content:"]"}#theme{cursor:pointer}[data-theme=light] #theme:before{content:"[ðŸŒš:"}#theme:before{content:"[ðŸŒž:"}#navbar-toggler{display:none}.content{width:80%;max-width:50rem;margin:auto}article em,article strong{color:var(--red)}.not-found,.coming-soon{text-align:center;width:100%;display:block}.item{border-top:1px dashed var(--red);color:var(--fg);margin:.5rem 0;padding:1rem;display:block}.item>:first-child{margin-top:0}.img-fluid{width:100%}.paginator{justify-content:space-between;margin:.5rem;display:flex}.footer,.tags{justify-content:center;margin:.5rem;display:flex}.disabled{pointer-events:none;color:var(--gray)}@media only screen and (width<=500px){.navbar{border:none}.nav-header{border-bottom:.025rem solid var(--green)}.navbar div{display:block;position:static}#navbar-toggler{background-color:inherit;color:inherit;border:none;display:inline;position:absolute;right:1rem;transform:rotate(90deg)}.navbar a:after,.navbar a:before{content:""}.navbar a{border-bottom:.025rem solid var(--green);display:none}.nav-header a{border:none;display:inline-block}.navbar a.show{display:block}.content{width:100%}.footer{display:inline-block}.paginator span{display:none}[data-theme=light] #theme:before{content:"ðŸŒš:"}#theme:before{content:"ðŸŒž:"}}</style><body><div class=navbar><div class=nav-header><a href=https://sak96.github.io/index.html>sak96-blog</a><a id=navbar-toggler>|||</a></div><div class=nav-start><a href=https://sak96.github.io/authors.html>Authors</a><a href=https://sak96.github.io/categories.html>Categories</a><a href=https://sak96.github.io/tags.html>Tags</a></div><div class=nav-end><a href=https://sak96.github.io/feeds/all.atom.xml>Atom</a><a id=theme>Theme</a></div></div><script>document.querySelector(`#navbar-toggler`).onclick=(a=>{document.querySelectorAll(`.nav-start a,.nav-end a`).forEach(a=>a.classList.toggle(`show`))});{let d=`data-theme`,e=`dark`,c=`light`,b=`theme`;let a=localStorage.getItem(b);if(a===c||window.matchMedia(`(prefers-color-scheme: light)`).matches){document.documentElement.setAttribute(d,c);localStorage.setItem(b,c)}else{document.documentElement.setAttribute(d,e);localStorage.setItem(b,e)}}document.querySelector(`#theme`).onclick=(a=>{let b=`data-theme`,d=`light`,c=`theme`;if(document.documentElement.getAttribute(b)){document.documentElement.setAttribute(b,``);localStorage.setItem(c,`dark`)}else{document.documentElement.setAttribute(b,d);localStorage.setItem(c,d)}})</script><div class=content><div><h1>Debugging Vim Errors</h1><h5><p>This article provides debugging tips for vim.</h5><h5>Read time: 3 min</h5><small>Written on April 25, 2022</small></div><div><article><h2>Why Debugging Vim ?</h2><p>Using Vim as it comes out of box is difficult. Plugins make vim, a lot more powerful. Some times some of these plugins cause issues, popping some error message. Having knowledge on how to figure out what is causing issue can help in such situations.<h2>Error Messages</h2><p>The error message which pop in vim may disappear when you type enter or hit some key. These error message are as stated "messages" in vim. To check the last error message again type <code>:echo errmsg</code> in normal mode. To view all message type <code>:messages</code> in normal mode.<p>Some time it is much better to view error in new buffer. This can be achieved as follows.<div class=codehilite><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span class=normal>1</span></pre></div><td class=code><div><pre><span></span><span class=p>:</span><span class=k>vnew</span> <span class=p>|</span> <span class=k>put</span><span class=p>=</span>execute<span class=p>(</span><span class=s1>'messages'</span><span class=p>)</span>
</pre></div></table></div><h2>Stack Trace in Vim ?</h2><p>The error message can be simple and easy to understand. Some of these error message are stack trace. These stack trace can be hard to follow some time. Below is partial stack trace.<div class=codehilite><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span class=normal>1</span>
<span class=normal>2</span>
<span class=normal>3</span></pre></div><td class=code><div><pre><span></span>Error detected while processing function &LTSNR>163_on_exit_vim[15]..1:
line    1:
E687: Less targets than List items
</pre></div></table></div><h2>Which function cause the issue ?</h2><p>Noticing <code>&LTSNR>163_on_exit_vim[15]</code> can lead to conclusion a function caused issue. The <code>&LTSNR>163</code> part indicates that 163rd script caused the issue. To find out the 163rd script, fetch all scripts with id.<div class=codehilite><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span class=normal>1</span></pre></div><td class=code><div><pre><span></span><span class=p>:</span><span class=k>vnew</span> <span class=p>|</span> <span class=k>put</span><span class=p>=</span>execute<span class=p>(</span><span class=s1>'scriptnames'</span><span class=p>)</span>
</pre></div></table></div><p>This will provide the script location which caused the issue. To go to the file press <code>gf</code> when on the file path.<div class=codehilite><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span class=normal>1</span></pre></div><td class=code><div><pre><span></span><span class=mi>163</span><span class=p>:</span><span class=w> </span><span class=o>~/.</span><span class=n>vim</span><span class=o>/</span><span class=n>plugged</span><span class=o>/</span><span class=n>vim</span><span class=o>-</span><span class=n>gitgutter</span><span class=o>/</span><span class=n>autoload</span><span class=o>/</span><span class=n>gitgutter</span><span class=o>/</span><span class=n>async</span><span class=o>.</span><span class=n>vim</span>
</pre></div></table></div><p>Now find the function <code>on_exit_vim</code> and move to 15th line (<code>15j</code>)in it. This is the function which was causing the issue. More information can be found in <a title="vim stack trace" href=https://stackoverflow.com/questions/51210172>stack overflow question</a>.<h2>How to debug stuff?</h2><p>Now having knowledge of what line in the function cause issue, let's reproduce it. First use <code>echom</code> and restart vim to figure out value of local variable from messages. Now execute the code in debug mode.<div class=codehilite><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span class=normal>1</span></pre></div><td class=code><div><pre><span></span><span class=k>debug</span> echo expand<span class=p>(</span><span class=s1>'%:h'</span><span class=p>)</span>
</pre></div></table></div><p>The above code returns quickly, but in real situation there is need for more debugging. Like any other debugger, when in debug mode command to control the program flow. Few of these are listed below.<table><thead><tr><th>command<th>action<tbody><tr><td>step<td>execute a command but step into function<tr><td>next<td>execute a command but step over function<tr><td>cont<td>continue execution till next break point<tr><td>quit<td>stop execution till next break point<tr><td>interrupt<td>stop execution till next command<tr><td>finish<td>continue till finish of current script/function<tr><td>breakadd<td>add breakpoint<tr><td>breakdel<td>add breakpoint</table><p>The commands <code>breakadd/breakdel</code> take location as argument. The argument can be as follows:<table><thead><tr><th>argument<th>explanation<tbody><tr><td>here<td>current location<tr><td>file [lineNumber] fileName<td>line x in file<tr><td>func [lineNumber] functionName<td>line x in function<tr><td>*<td>all useful with breakdel</table><p>There is much detailed explanation in following <a title="debugging vim" href=https://inlehmansterms.net/2014/10/31/debugging-vim/>blog article</a>.<h2>Are there logs in vim ?</h2><p>Vim has logging functionality builtin it. To start vim in most verbose mode and log it to a file use following command. More information can be got in vim help or you check <a title="vim logs" href=https://stackoverflow.com/questions/3025615>stack overflow question</a>.<div class=codehilite><table class=codehilitetable><tr><td class=linenos><div class=linenodiv><pre><span class=normal>1</span></pre></div><td class=code><div><pre><span></span>vim<span class=w> </span>-V9myVim.log
</pre></div></table></div></article></div><div class=tags><span>Post Tags:</span><a href=tag/vim.html>Â #vim,</a><a href=tag/neovim.html>Â #neovim,</a><a href=tag/debugging.html>Â #debugging</a></div><hr class=my-3><div id=comments></div><script>var PopulateComment=(a=>{let e=`div`,f=`a`,g=`item`;commentsBlock=document.getElementById(`comments`);let b=document.createElement(e);b.innerText=`Comments`;commentsBlock.append(b);let c=document.createElement(e);commentsBlock.append(c);a.forEach(a=>{let b=document.createElement(`span`);b.innerText=a.user.login;updateTime=document.createElement(`small`);updateTime.innerText=`(`+ a.updated_at+ `)`;commentBody=document.createElement(e);commentBody.innerText=a.body;lineBreak=document.createElement(`br`);commentBox=document.createElement(f);commentBox.classList.add(g);commentBox.append(b);commentBox.append(updateTime);commentBox.append(lineBreak);commentBox.append(commentBody);commentBox.href=a.html_url;c.append(commentBox)});let d=document.createElement(f);d.classList.add(g);d.href=issueUrl;d.innerText=`Have some comments? Add comment ...`;c.append(d)});let commentUrl=`https://api.github.com/repos/sak96/sak96.github.io/issues/13/comments`;let issueUrl=`https://github.com/sak96/sak96.github.io/issues/13`;var xhr=new XMLHttpRequest();xhr.open(`GET`,commentUrl,!0);xhr.responseType=`json`;xhr.onload=(()=>{var a=xhr.status;if(a===200){console.log(PopulateComment(xhr.response))}else{console.log(xhr.response)}});xhr.send()</script><script src=https://unpkg.com/mermaid@latest/dist/mermaid.min.js></script><hr><div class=footer><span>Powered by:</span><a href=http://getpelican.com/>Pelican,</a><a href=https://github.com/pygments/pygments>Pygments,</a><a href=https://github.com/morhetz/gruvbox-contrib>Gruvbox</a></div></div>